server:
  port: 5000
spring:
  main:
    allow-bean-definition-overriding: true
    web-application-type: reactive
  profiles:
    active: ${ENV_PROFILE:dev}
  application:
    name: gateway
  cloud:
    sentinel:
      transport:
        dashboard: localhost:8080
      scg:
        fallback:
          mode: response
          response-status: 426
          response-body: '{
            "status": 426,
            "message": "请求被禁止",
            "data": null
          }'
      eager: true

    nacos:
      config:
        enabled: true
        server-addr: ${NACOS_SERVER:isawesome.cn:8848}
        username: nacos
        password: zxc111
        file-extension: yaml
        shared-configs:
          - data-id: application.yaml
            refresh: true
          - data-id: application-${spring.profiles.active}.yaml
            refresh: true
      discovery:
        enabled: true
        server-addr: ${NACOS_SERVER:isawesome.cn:8848}
        username: nacos
        password: zxc111
    gateway: #可以放在nacos中做动态配置
      discovery:
        locator:
          enabled: true
          lower-case-service-id: true
      routes:
        - id: bd
          uri: https://www.baidu.com/
          predicates:
            - Path=/bd/**
          filters:
            - StripPrefix=1
        - id: order-service
          uri: lb://order-service
          predicates:
            - Path=/orderService/**
          filters:
            - StripPrefix=1
        - id: ticket-service
          uri: lb://ticket-service
          predicates:
            - Path=/ticketService/**
          filters:
            - StripPrefix=1
